specVersion: 1.3.0

indexerHints:
  prune: auto

description: Subgraph Alchemy pour indexer les marchés Makao
repository: https://github.com/makao-team/makao-subgraph

schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: MakaoFactory
    network: sepolia
    source:
      address: "0xfc58FefaDA53D508FD584278B8EED8e7A02c34B2"
      abi: MakaoFactory
      startBlock: 8553252
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Market
        - User
        - GlobalStat
      abis:
        - name: MakaoFactory
          file: ./abis/MakaoFactory.json
      eventHandlers:
        - event: CreateInstance(indexed address)
          handler: handleCreateInstance
      file: ./src/makao-factory.ts
# templates:
#   - kind: ethereum
#     name: MakaoFixture
#     network: sepolia # Même réseau que la datasource principale
#     source:
#       abi: MakaoFixture
#     mapping:
#       kind: ethereum/events
#       apiVersion: 0.0.7
#       language: wasm/assemblyscript
#       entities:
#         - Market
#         - Challenge
#         - Engagement
#         - Collection
#         - User
#         - GlobalStat
#         - MarketEvent
#       abis:
#         - name: MakaoFixture
#           file: ./abis/MakaoFixture.json
#       eventHandlers:
#         - event: EngageChallenge(address,uint256,uint256)
#           handler: handleEngageChallenge
#         - event: EventCancelled()
#           handler: handleEventCancelled
#         - event: ExitEvent(address,address,uint256)
#           handler: handleExitEvent
#         - event: ResolveEvent(uint256[])
#           handler: handleResolveEvent
#         - event: MarketMetadataSet(string)
#           handler: handleMarketMetadataSet
